<!DOCTYPE html>
<html ng-app="myApp" ng-controller="appListController">
<head>
    <title>Apps</title>

    <script src="/js/angular.min.js"></script>
    <link href="/css/bootstrap.css" rel="stylesheet">
    <link href="/css/app.css" rel="stylesheet">
    <link href="/css/test.css" rel="stylesheet">

</head>

<body>
<!-- Bootstrap core JavaScript -->
<script src="/js/jquery-1.11.2.min.js"></script>
<script src="/js/bootstrap.min.js"></script>

<div class="container">

    <br>
    <br>
    <div align="center">
        <a href="/"><img src="/img/icon_64.png"></a>
        <h1>Apps</h1>
    </div>
    <br>

    <div align="center">

        <p><input type="text" ng-model="search">#{{ (apps|filter:search).length }}</p>

        <table class="card">
            <tr>
                <td></td>
                <td align="left">
                    <strong>App Name</strong>
                </td>
                <td>
                    <strong>Package</strong>
                </td>
                <td>
                    <strong>Version</strong>
                </td>
            </tr>
            <tr ng-repeat="a in apps | orderBy: 'name' | filter : search ">
                <td><a href="/app.html?package={{ a.package}}"><img src="/img/ic_action_info_outline.png"></a></td>
                <td>{{ a.name }}</td>
                <td><a href="https://play.google.com/store/apps/details?id={{a.package}}" target="_blank">{{ a.package }}</a></td>
                <td>{{ a.version_name }}</td>
            </tr>
        </table>
    </div>


</div><!-- /card-container -->

<br>
<br>
<br>

<div class="col-xs-12 col-sm-12 col-md-12 col-lg-12" align="center">
    <p>
        &copy;
        <script>
			var d = new Date();
			document.write(d.getFullYear());
		</script>
        Nuvolect LLC -
        <a href="https://nuvolect.com/pentest_terms/" target="_blank">Terms</a>
        -
        <a href="https://nuvolect.com/privacy/" target="_blank">Privacy</a>
        -
        <a href="https://nuvolect.com/pentest_help/" target="_blank">Help</a>
    </p>
</div>

<script>

var app = angular.module('myApp', []);
app.controller('appListController', function($scope, $http, $parse) {

     $http.get("/connector/?cmd=pentest&test_id=apps")
       .then(function (response) {

        // List is currently a string, convert it to JSON
        $scope.apps = $.parseJSON( response.data.apps );
     });
});

</script>
</body>
</html>