package com.nuvolect.pentest.lucene;
//
//TODO create class description
//

import android.os.Environment;

import com.nuvolect.pentest.util.OmniHash;
import com.nuvolect.pentest.util.Util;
import com.nuvolect.pentest.webserver.connector.VolUtil;

import org.apache.commons.io.FileUtils;

import java.io.File;
import java.util.Collection;

public class FileUtil {

    /**
     * Get a Lucene cache folder.
     * @param relativeSearchPath
     * @return
     */
    public static File getLucineCacheDir(String relativeSearchPath) {

        String volId = VolUtil.sdcardVolumeId;
        String hashedSearchPath = volId+OmniHash.encode( relativeSearchPath);
        String lucenePath = Util.getAppPublicFolderPath() + "/.lucine/" + hashedSearchPath;
        return new File( lucenePath);
    }

    /**
     * File extensions that are scanned by Lucene
     */
    static String[] extensions = {
            "xml",
            "txt",
            "java",
            "json",
            "md",
            "html",
            "htm",
            "css",
    };

    public static Collection getFilePaths(String topDirRelativePath) {

        File topDir = new File( Environment.getExternalStorageDirectory()+topDirRelativePath);
        Collection<File> files = FileUtils.listFiles(topDir, extensions, true);

        return files;
    }
}
